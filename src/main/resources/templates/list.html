<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/layout}">
<!-- head, body 태그 제거하고 작성 -->
<th:block layout:fragment="script">
  <script th:inline="javascript">
    function fn_go_list() {

      let searchType = document.getElementById("searchType").value;
      let keyword = document.getElementById("keyword").value;

      location.href = "/list"
        + [[${ pageMaker.makeQuery(1) }]]
        + '&searchType='
        + searchType
        + '&keyword='
        + keyword;
    }
  </script>
</th:block>
<th:block layout:fragment="content">
  <h1 class="mt-5">게시판 글 목록</h1>
  <div class="row">
    <div class="col">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">글 번호</th>
            <th scope="col">제목</th>
            <th scope="col">작성자</th>
            <th scope="col">조회 수</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="boardVO:${list}" th:object="${boardVO}">
            <th scope="row" th:text="${boardVO.bno}"></th>
            <td>
              <a th:href="|/readPage${pageMaker.makeSearch(pageMaker.cri.page)}&bno=${boardVO.bno}|"
                th:text="${boardVO.title}"></a>
            </td>
            <td th:text="${boardVO.writer}"></td>
            <td th:text="${boardVO.viewcount}"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <th:block th:if="${pageMaker.prev}">
            <li class="page-item"><a class="page-link"
                th:href="|/list${pageMaker.makeSearch(pageMaker.startPage - 1)}|">Previous</a>
            </li>
          </th:block>
          <th:block th:each="num : ${#numbers.sequence(pageMaker.startPage, pageMaker.endPage)}">
            <li class="page-item" th:classappend="${pageMaker.cri.page == num ? 'active' : ''}"><a class="page-link"
                th:href="|list${pageMaker.makeSearch(num)}|" th:text="${num}"></a>
            </li>
          </th:block>
          <th:block th:if="${pageMaker.next}">
            <li class="page-item"><a class="page-link"
                th:href="|/list${pageMaker.makeSearch(pageMaker.endPage + 1)}|">Next</a>
            </li>
          </th:block>
        </ul>
      </nav>
    </div>
    <div class="col"></div>
    <div class="col-2">
      <select class="form-select" aria-label="Default select example" name="searchType" id="searchType">
        <option value="n" th:selected="${cri.searchType} == null">검색 종류 선택</option>
        <option value="t" th:selected="${cri.searchType} == 't'">제목</option>
        <option value="c" th:selected="${cri.searchType} == 'c'">내용</option>
        <option value="w" th:selected="${cri.searchType} == 'w'">작성자</option>
        <option value="tc" th:selected="${cri.searchType} == 'tc'">제목+내용</option>
        <option value="cw" th:selected="${cri.searchType} == 'cw'">내용+작성자</option>
        <option value="tcw" th:selected="${cri.searchType} == 'tcw'">제목+내용+작성자</option>
      </select>
    </div>
    <div class="col-2">
      <input type="text" name="keyword" id="keyword" th:value="${cri.keyword}">
    </div>
    <div class="col-1">
      <button type="button" class="btn btn-primary" onclick="fn_go_list();">Search</button>
    </div>
  </div>
</th:block>

</html>